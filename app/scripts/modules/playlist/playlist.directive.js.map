{"version":3,"sources":["playlist.directive.jsx"],"names":[],"mappings":";;AAAC,aAAW;AACV;;AAGA,MAAI,oBAAoB,MAAM,WAAN,CAAkB;AAAA;;AACxC,YAAQ,kBAAY;AAClB,aAAO;AAAA;QAAA;QAAA;QAAM;AAAA;UAAA;UAAA;AAAA,SAAN;QAAA;AAAA,OAAP;AACD;AAHuC,GAAlB,CAAxB;;AAMA,MAAI,6BAA6B,SAA7B,0BAA6B,CAAU,cAAV,EAA0B;AACzD,WAAO,eAAe,iBAAf,CAAP;AACD,GAFD;;AAIA,MAAI,oBAAoB,SAApB,iBAAoB,GAAW;AACjC,WAAO;AACL,gBAAU,GADL;AAEL,kBAAY,0BAFP;AAGL,aAAO,EAHF;AAIL,mBAAa;AAJR,KAAP;AAMD,GAPD;;AASA,MAAI,qBACF,SADE,kBACF,CAAS,IAAT,EAAe,MAAf,EAAuB,eAAvB,EAAwC,cAAxC,EAAwD;AACtD,QAAI,aAAa,IAAjB;AACA,YAAQ,MAAR,CAAe,UAAf,EAA2B;AACzB,sBAAgB,KADS;AAEzB,sBAAgB,EAFS;AAGzB,kBAAY,gBAAgB,UAHH;AAIzB,kBAAY,UAJa;AAKzB,aAAO;AALkB,KAA3B;;AAQA,aAAS,UAAT,CAAqB,IAArB,EAA2B;AACzB,sBAAgB,QAAhB,CAAyB,IAAzB;AACD;;AAED,aAAS,WAAT,CAAqB,KAArB,EAA4B;AAC1B,WAAK,KAAL,CAAW,iCAAX,EAA8C,KAAK,SAAL,CAAe,KAAf,CAA9C;AACA,iBAAW,KAAX,GAAmB,KAAnB;AACD;;AAED,aAAS,OAAT,GAAmB;AACjB,aAAO,MAAP,CAAc,YAAW;AACvB,aAAK,KAAL,CAAW,cAAX,EAA2B,gBAAgB,iBAAhB,EAA3B;AACA,mBAAW,cAAX,GAA4B,gBAAgB,iBAAhB,EAA5B;AACD,OAHD;AAID;;AAED,mBAAe,SAAf,CAAyB,UAAzB,EACG,SADH,CACa,UAAS,MAAT,EAAiB;AAC1B,cAAQ,OAAO,KAAf;AACA,aAAK,QAAL;AACE,eAAK,KAAL,CAAW,uCAAX;AACA,sBAAY,OAAO,KAAnB;AACA,qBAAW,cAAX,GAA4B,IAA5B;AACA,qBAAW,YAAX,GAA0B,gBAAgB,QAAhB,CAAyB,OAAzB,EAA1B;AACA;AACF,aAAK,SAAL;AACE,eAAK,KAAL,CAAW,8BAAX;AACA,kBAAQ,OAAO,IAAf;AACA;AAVF;AAYD,KAdH;AAeD,GA1CH;;AA4CA,UAAQ,MAAR,CAAe,cAAf,EACG,KADH,CACS,mBADT,EAC8B,iBAD9B,EAEG,SAFH,CAEa,4BAFb,EAE2C,0BAF3C,EAGG,SAHH,CAGa,UAHb,EAGyB,iBAHzB,EAIG,UAJH,CAIc,oBAJd,EAIoC,kBAJpC;AAKD,CAxEA,GAAD","file":"playlist.directive.js","sourcesContent":["(function() {\n  'use strict';\n\n\n  var PlaylistComponent = React.createClass({\n    render: function () {\n      return <div> <h3>Hello 2</h3> </div>;\n    }\n  });\n\n  var playlistComponentDirective = function (reactDirective) {\n    return reactDirective(PlaylistComponent);\n  };\n\n  var playlistDirective = function() {\n    return {\n      restrict: 'E',\n      controller: 'PlaylistController as vm',\n      scope: {},\n      templateUrl: 'scripts/modules/playlist/playlist.html'\n    };\n  };\n\n  var playlistController =\n    function($log, $scope, playlistService, streamsService) {\n      var controller = this;\n      angular.extend(controller, {\n        playlistLoaded: false,\n        currentPlaying: '',\n        removeItem: playlistService.removeItem,\n        selectItem: selectItem,\n        items: []\n      });\n\n      function selectItem (item) {\n        playlistService.playItem(item);\n      }\n\n      function updateItems(items) {\n        $log.debug('PlalistController > updateItem ', JSON.stringify(items));\n        controller.items = items;\n      }\n\n      function playing() {\n        $scope.$apply(function() {\n          $log.debug('playing now ', playlistService.getCurrentPlaying());\n          controller.currentPlaying = playlistService.getCurrentPlaying();\n        });\n      }\n\n      streamsService.getStream('playlist')\n        .subscribe(function(stream) {\n          switch (stream.event) {\n          case 'update':\n            $log.debug('playlistController > playlist updated');\n            updateItems(stream.items);\n            controller.playlistLoaded = true;\n            controller.playlistName = playlistService.playlist.getName();\n            break;\n          case 'playing':\n            $log.debug('playlistController > playing');\n            playing(stream.data);\n            break;\n          }\n        });\n    };\n\n  angular.module('altoPlaylist')\n    .value('PlaylistComponent', PlaylistComponent)\n    .directive('playlistComponentDirective', playlistComponentDirective)\n    .directive('playlist', playlistDirective)\n    .controller('PlaylistController', playlistController);\n}());"]}