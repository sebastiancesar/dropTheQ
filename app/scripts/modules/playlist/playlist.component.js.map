{"version":3,"sources":["playlist.component.jsx"],"names":[],"mappings":"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","file":"playlist.component.js","sourcesContent":["(function () {\n    \n  'use strict';\n\n  var PlaylistItemComponent = React.createClass({\n    removeItem: function () {\n      this.props.removeItem(this.props.item);\n    },\n    selectItem: function () {\n      this.props.selectItem(this.props.item);\n    },\n    render: function () {\n      var liClassNames = 'list-group-item',\n        item = this.props.item;\n      liClassNames = this.props.currentPlaying === item.$id ? liClassNames + ' playing': liClassNames;\n      return (\n        <li className={liClassNames}>\n          <a className=\"btn btn-warning btn-xs pull-right\"\n            role=\"button\"\n            onClick={this.removeItem}>\n              x\n          </a>\n          <a className=\"pull-left thumb-sm margin-right\">\n            <img src={item.snippet.thumbnails.medium.url}/>    \n          </a>\n          <a href=\"\" onClick={this.selectItem}>\n              <span class=\"text-ellipsis small item-title\"> {item.snippet.title}</span>\n          </a>\n        </li>);\n    }\n  });\n\n  var PlaylistComponent = function ($log, streamsService, playlistService) {\n    var playlistStream = streamsService.getStream('playlist');\n\n    return React.createClass({\n      playlistHandle: function (stream) {\n        function updatedPlaylistState (stream) {\n          return {\n            items: stream.items,\n            playlistLoaded: true,\n            playlistName: playlistService.playlist.getName()\n          };\n        }\n        switch (stream.event) {\n        case 'update':\n          $log.debug('playlistController > playlist updated');\n          this.setState(updatedPlaylistState(stream));\n          break;\n        }\n      },\n      componentWillMount: function () {\n        $log.debug('PlaylistComponent > subscribing to playlistStream');\n        playlistStream.subscribe(this.playlistHandle);\n      },\n      getInitialState: function () {\n        return {playlistLoaded: false, items: []};\n      },\n      getPlaylistItems: function () {\n        var items = this.state.items.map(function (item) {\n          return (\n            <PlaylistItemComponent \n              key={item.$id} \n              item={item}\n              removeItem={playlistService.removeItem}\n              selectItem={playlistService.playItem} />\n            );\n        });\n        return items;\n      },\n      render: function () {\n        var clasess = 'playlist items_container';\n        clasess = this.state.playlistLoaded ? clasess: clasess + ' hide';\n\n        return (\n          <div className={clasess}> \n            <div className=\"row\">\n              <ul className=\"list-group\">\n                <li key=\"-1\" className=\"list-group-item text-center\">\n                  <span className=\"text-medium\">{this.state.playlistName}</span>\n                </li>\n                {this.getPlaylistItems()}\n              </ul>\n            </div>\n          </div>);\n      }\n    });\n  };\n\n  PlaylistComponent.$inect = ['$log', 'streamsService'];\n\n  var playlistComponentDirective = function (reactDirective, PlaylistComponent) {\n    return reactDirective(PlaylistComponent);\n  };\n\n  angular.module('altoPlaylist')\n    .factory('PlaylistComponent', PlaylistComponent)\n    .directive('playlistComponentDirective', playlistComponentDirective);\n}());"]}